# 这个区段由开发者编写,未经允许禁止AI修改
<这是一个用于存放通用工具函数和类的文件夹>

## 代码迁移说明

### performanceRun.js 迁移

原始文件 `performanceRun.js` 已迁移至 `src/toolBox/base/useEcma/performance.js`。

**迁移理由：**
1. 性能监测工具属于基础工具类，适合放在通用工具集中
2. 功能需要扩展，包括更多性能分析能力
3. 提高代码质量和测试覆盖率

**变更内容：**
- 增加了更全面的性能统计指标（最小/最大/平均时间）
- 添加了函数性能比较工具（comparePerformance）
- 提供了手动性能计时器（performanceTimer）
- 支持清除性能统计数据
- 提供了更好的类型标注和文档

**向后兼容性：**
- 原始文件保留并导入新实现
- 原始API名称保持不变（通过重新导出）
- 添加了警告提示用户使用新模块

**使用建议：**
- 新代码应直接使用 `performance.js` 模块
- 现有代码可以逐步迁移到新模块
- 参考 `src/toolBox/base/useEcma/AInote.md` 了解详细用法

# 函数工具模块迁移计划

## 当前位置

本目录(`source/utils/functionAndClass`)包含一系列函数式编程工具和性能监测工具，需要迁移到新的架构中。

## 待迁移内容

### 性能监测工具 (performanceRun.js)

- **主要功能**：提供函数性能监测的包装器
- **核心API**：`withPerformanceLogging` - 包装函数并记录其执行时间
- **当前状态**：基础功能可用，但缺乏配置选项和高级分析功能

### 函数式编程工具 (../functionTools.js)

- **主要功能**：提供各种函数式编程范式的工具函数
- **核心API**：
  - `顺序组合函数` - 组合多个函数，从右到左执行
  - `管道函数` - 组合多个函数，从左到右执行
  - `柯里化` - 将多参数函数转换为一系列单参数函数
  - `等待参数达到长度后执行` - 基于参数数量的函数执行控制
  - `组合函数` - 并行执行多个函数并收集结果

## 迁移目标

1. **性能监测工具**：
   - 迁移至 `src/toolBox/base/useEcma/performance.js`
   - 保留原功能的同时扩展更多配置选项
   - 添加更详细的性能分析能力

2. **函数式编程工具**：
   - 迁移至 `src/toolBox/base/forChain/`
   - 每类工具拆分到专门的文件：
     - `compose.js` - 包含顺序组合函数和管道函数
     - `curry.js` - 包含柯里化相关函数
     - `parallel.js` - 包含并行执行相关函数

## 扩展计划

1. **性能监测增强**：
   - 添加阈值报警功能
   - 支持性能数据可视化
   - 实现性能日志导出

2. **函数工具增强**：
   - 添加记忆化(memoization)功能
   - 实现更多函数组合模式
   - 添加函数节流(throttle)和防抖(debounce)

## 命名规范

按照项目的中英文混合命名策略：

1. **保留中文命名**：
   - 保留`顺序组合函数`、`管道函数`等中文函数名
   - 通过导出别名同时提供英文命名

2. **实现方式**：
   ```javascript
   // 实现函数
   function 顺序组合函数(...函数数组) {
     // 实现...
   }
   
   // 导出中英文命名
   export { 顺序组合函数 };
   export { 顺序组合函数 as compose };
   ```

## 迁移步骤

1. **代码分析**：
   - 分析现有函数的依赖关系
   - 识别可优化的性能点
   - 明确函数签名和返回值

2. **创建目标文件**：
   - 在目标目录创建相应文件
   - 设计统一的API接口
   - 实现单元测试框架

3. **迁移实现**：
   - 将函数迁移到新文件
   - 优化实现细节
   - 添加完整的JSDoc文档

4. **兼容导出**：
   - 在原位置添加重定向导出
   - 使用中英文命名的导出别名
   - 添加废弃警告（console.warn）

5. **更新引用**：
   - 识别所有使用这些函数的地方
   - 逐步更新引用路径
   - 验证功能一致性

## 优先级和时间线

1. **高优先级** (1-2周)：
   - 迁移基础的函数组合工具和柯里化
   - 这些是构建其他功能的基础

2. **中优先级** (2-3周)：
   - 迁移性能监测工具
   - 用于优化其他工具函数

3. **低优先级** (3-4周)：
   - 实现扩展功能
   - 完善文档和测试用例

## 注意事项

- 保持API的向后兼容性
- 确保函数的纯粹性和无副作用
- 添加适当的类型提示和错误处理
- 每个函数都添加单元测试
- 记录性能对比数据 