# Bootstrap 引导模块

## 模块说明

Bootstrap模块是服务器的引导和启动模块，负责初始化系统、启动服务器并管理应用生命周期。该模块是整个应用的起点，确保所有服务和资源按照正确的顺序初始化。

## 文件结构

- `main.js` - 应用主入口，负责整个应用的启动流程
- `initializer.js` - 系统初始化器，负责初始化各个子系统
- `serverStarter.js` - 服务器启动器，负责启动HTTP服务器
- `preload.js` - 预加载脚本，用于Electron环境中加载和初始化

## 功能说明

### main.js

`main.js`是应用的主入口点，执行以下任务：

1. 显示启动横幅（包含版本信息）
2. 初始化配置系统
3. 初始化日志系统
4. 加载并应用预处理模块
5. 初始化各个核心服务
6. 启动API服务
7. 注册进程退出处理程序

### initializer.js

`initializer.js`负责系统初始化，包括：

1. 加载环境变量
2. 初始化配置系统
3. 设置全局异常处理
4. 初始化日志系统
5. 初始化各个服务模块
6. 注册事件监听器

### serverStarter.js

`serverStarter.js`负责启动HTTP服务器：

1. 创建Express应用实例
2. 应用中间件
3. 注册API路由
4. 启动HTTP服务器
5. 监听服务器事件

### preload.js

`preload.js`用于Electron环境，功能包括：

1. 安全地暴露选定的Node.js API
2. 设置IPC通信通道
3. 提供心跳机制
4. 处理主进程和渲染进程之间的通信

## 启动流程

整个应用的启动流程如下：

1. 执行`main.js`
2. 调用`initializer.js`进行系统初始化
3. 初始化所有需要的服务和资源
4. 调用`serverStarter.js`启动HTTP服务器
5. 注册进程事件处理程序

## 使用方法

通常不需要直接修改这些文件，除非需要调整启动流程或添加新的初始化步骤。如需添加新服务的初始化，应当：

1. 在`initializer.js`中添加新服务的初始化流程
2. 确保初始化顺序正确（考虑依赖关系）
3. 添加适当的错误处理和日志记录

## 注意事项

- 引导模块应当尽量精简，仅包含必要的初始化和启动逻辑
- 避免在引导模块中实现业务逻辑，业务逻辑应当放在相应的服务模块中
- 确保正确处理错误情况，任何初始化失败都应当导致应用优雅退出
- 日志记录应当详细记录启动过程中的每个重要步骤 
