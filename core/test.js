// 串链器测试用例.js
import { 创建串链器, 创建扩展定义 } from '../src/工具箱/forCore/串链器.js';
// 创建串链器实例
const 数学链 = 创建串链器();

// 注册多个"加"态射
数学链
  .命名空间('数学')
    .加((值, 加数) => {
      console.log('使用第一个加法：普通加');
      return 值 + 加数;
    })
    .加((值, 加数) => {
      console.log('使用第二个加法：加倍');
      return 值 + 加数 * 2;
    })
    .加((值, 加数) => {
      console.log('使用第三个加法：三倍');
      return 值 + 加数 * 3;
    });

// 测试调用
console.log('测试 1:', 数学链(10).使用命名空间('数学').加(5).值);  // 应该使用第一个实现

// 使用匹配器的例子
const 数学链2 = 创建串链器();
数学链2
  .命名空间('数学')
    .加(
      (值, 加数) => {
        console.log('使用整数加法');
        return 值 + 加数;
      },
      ([加数]) => Number.isInteger(加数)
    )
    .加(
      (值, 加数) => {
        console.log('使用小数加法');
        return 值 + Math.floor(加数);
      },
      ([加数]) => !Number.isInteger(加数)
    );

console.log('\n带匹配器的测试:');
console.log('测试 2 (整数):', 数学链2(10).使用命名空间('数学').加(5).值);
console.log('测试 3 (小数):', 数学链2(10).使用命名空间('数学').加(5.7).值);