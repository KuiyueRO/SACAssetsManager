/* esm.sh - esbuild bundle(dom-to-image@2.6.0) es2022 production */
var ue=Object.create;var O=Object.defineProperty;var ce=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var se=Object.getPrototypeOf,fe=Object.prototype.hasOwnProperty;var he=(m,n)=>()=>(n||m((n={exports:{}}).exports,n),n.exports),me=(m,n)=>{for(var g in n)O(m,g,{get:n[g],enumerable:!0})},N=(m,n,g,L)=>{if(n&&typeof n=="object"||typeof n=="function")for(let U of le(n))!fe.call(m,U)&&U!==g&&O(m,U,{get:()=>n[U],enumerable:!(L=ce(n,U))||L.enumerable});return m},D=(m,n,g)=>(N(m,n,"default"),g&&N(g,n,"default")),$=(m,n,g)=>(g=m!=null?ue(se(m)):{},N(n||!m||!m.__esModule?O(g,"default",{value:m,enumerable:!0}):g,m));var _=he((J,V)=>{(function(m){"use strict";var n=re(),g=ie(),L=oe(),U=ae(),H={imagePlaceholder:void 0,cacheBust:!1},x={toSvg:X,toPng:K,toJpeg:Q,toBlob:Y,toPixelData:z,impl:{fontFaces:L,images:U,util:n,inliner:g,options:{}}};typeof V<"u"?V.exports=x:m.domtoimage=x;function X(r,t){return t=t||{},Z(t),Promise.resolve(r).then(function(a){return G(a,t.filter,!0)}).then(ee).then(te).then(i).then(function(a){return ne(a,t.width||n.width(r),t.height||n.height(r))});function i(a){return t.bgcolor&&(a.style.backgroundColor=t.bgcolor),t.width&&(a.style.width=t.width+"px"),t.height&&(a.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach(function(s){a.style[s]=t.style[s]}),a}}function z(r,t){return F(r,t||{}).then(function(i){return i.getContext("2d").getImageData(0,0,n.width(r),n.height(r)).data})}function K(r,t){return F(r,t||{}).then(function(i){return i.toDataURL()})}function Q(r,t){return t=t||{},F(r,t).then(function(i){return i.toDataURL("image/jpeg",t.quality||1)})}function Y(r,t){return F(r,t||{}).then(n.canvasToBlob)}function Z(r){typeof r.imagePlaceholder>"u"?x.impl.options.imagePlaceholder=H.imagePlaceholder:x.impl.options.imagePlaceholder=r.imagePlaceholder,typeof r.cacheBust>"u"?x.impl.options.cacheBust=H.cacheBust:x.impl.options.cacheBust=r.cacheBust}function F(r,t){return X(r,t).then(n.makeImage).then(n.delay(100)).then(function(a){var s=i(r);return s.getContext("2d").drawImage(a,0,0),s});function i(a){var s=document.createElement("canvas");if(s.width=t.width||n.width(a),s.height=t.height||n.height(a),t.bgcolor){var l=s.getContext("2d");l.fillStyle=t.bgcolor,l.fillRect(0,0,s.width,s.height)}return s}}function G(r,t,i){if(!i&&t&&!t(r))return Promise.resolve();return Promise.resolve(r).then(a).then(function(o){return s(r,o,t)}).then(function(o){return l(r,o)});function a(o){return o instanceof HTMLCanvasElement?n.makeImage(o.toDataURL()):o.cloneNode(!1)}function s(o,u,y){var A=o.childNodes;if(A.length===0)return Promise.resolve(u);return d(u,n.asArray(A),y).then(function(){return u});function d(R,w,p){var P=Promise.resolve();return w.forEach(function(B){P=P.then(function(){return G(B,p)}).then(function(b){b&&R.appendChild(b)})}),P}}function l(o,u){if(!(u instanceof Element))return u;return Promise.resolve().then(y).then(A).then(d).then(R).then(function(){return u});function y(){w(window.getComputedStyle(o),u.style);function w(p,P){p.cssText?P.cssText=p.cssText:B(p,P);function B(b,T){n.asArray(b).forEach(function(e){T.setProperty(e,b.getPropertyValue(e),b.getPropertyPriority(e))})}}}function A(){[":before",":after"].forEach(function(p){w(p)});function w(p){var P=window.getComputedStyle(o,p),B=P.getPropertyValue("content");if(B===""||B==="none")return;var b=n.uid();u.className=u.className+" "+b;var T=document.createElement("style");T.appendChild(e(b,p,P)),u.appendChild(T);function e(c,h,f){var v="."+c+":"+h,E=f.cssText?M(f):j(f);return document.createTextNode(v+"{"+E+"}");function M(C){var S=C.getPropertyValue("content");return C.cssText+" content: "+S+";"}function j(C){return n.asArray(C).map(S).join("; ")+";";function S(k){return k+": "+C.getPropertyValue(k)+(C.getPropertyPriority(k)?" !important":"")}}}}}function d(){o instanceof HTMLTextAreaElement&&(u.innerHTML=o.value),o instanceof HTMLInputElement&&u.setAttribute("value",o.value)}function R(){u instanceof SVGElement&&(u.setAttribute("xmlns","http://www.w3.org/2000/svg"),u instanceof SVGRectElement&&["width","height"].forEach(function(w){var p=u.getAttribute(w);p&&u.style.setProperty(w,p)}))}}}function ee(r){return L.resolveAll().then(function(t){var i=document.createElement("style");return r.appendChild(i),i.appendChild(document.createTextNode(t)),r})}function te(r){return U.inlineAll(r).then(function(){return r})}function ne(r,t,i){return Promise.resolve(r).then(function(a){return a.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(a)}).then(n.escapeXhtml).then(function(a){return'<foreignObject x="0" y="0" width="100%" height="100%">'+a+"</foreignObject>"}).then(function(a){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+i+'">'+a+"</svg>"}).then(function(a){return"data:image/svg+xml;charset=utf-8,"+a})}function re(){return{escape:R,parseExtension:t,mimeType:i,dataAsUrl:d,isDataUrl:a,canvasToBlob:l,resolveUrl:o,getAndEncode:A,uid:u(),delay:w,asArray:p,escapeXhtml:P,makeImage:y,width:B,height:b};function r(){var e="application/font-woff",c="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:c,jpeg:c,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function t(e){var c=/\.([^\.\/]*?)$/g.exec(e);return c?c[1]:""}function i(e){var c=t(e).toLowerCase();return r()[c]||""}function a(e){return e.search(/^(data:)/)!==-1}function s(e){return new Promise(function(c){for(var h=window.atob(e.toDataURL().split(",")[1]),f=h.length,v=new Uint8Array(f),E=0;E<f;E++)v[E]=h.charCodeAt(E);c(new Blob([v],{type:"image/png"}))})}function l(e){return e.toBlob?new Promise(function(c){e.toBlob(c)}):s(e)}function o(e,c){var h=document.implementation.createHTMLDocument(),f=h.createElement("base");h.head.appendChild(f);var v=h.createElement("a");return h.body.appendChild(v),f.href=c,v.href=e,v.href}function u(){var e=0;return function(){return"u"+c()+e++;function c(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function y(e){return new Promise(function(c,h){var f=new Image;f.onload=function(){c(f)},f.onerror=h,f.src=e})}function A(e){var c=3e4;return x.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime()),new Promise(function(h){var f=new XMLHttpRequest;f.onreadystatechange=M,f.ontimeout=j,f.responseType="blob",f.timeout=c,f.open("GET",e,!0),f.send();var v;if(x.impl.options.imagePlaceholder){var E=x.impl.options.imagePlaceholder.split(/,/);E&&E[1]&&(v=E[1])}function M(){if(f.readyState===4){if(f.status!==200){v?h(v):C("cannot fetch resource: "+e+", status: "+f.status);return}var S=new FileReader;S.onloadend=function(){var k=S.result.split(/,/)[1];h(k)},S.readAsDataURL(f.response)}}function j(){v?h(v):C("timeout of "+c+"ms occured while fetching resource: "+e)}function C(S){console.error(S),h("")}})}function d(e,c){return"data:"+c+";base64,"+e}function R(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function w(e){return function(c){return new Promise(function(h){setTimeout(function(){h(c)},e)})}}function p(e){for(var c=[],h=e.length,f=0;f<h;f++)c.push(e[f]);return c}function P(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")}function B(e){var c=T(e,"border-left-width"),h=T(e,"border-right-width");return e.scrollWidth+c+h}function b(e){var c=T(e,"border-top-width"),h=T(e,"border-bottom-width");return e.scrollHeight+c+h}function T(e,c){var h=window.getComputedStyle(e).getPropertyValue(c);return parseFloat(h.replace("px",""))}}function ie(){var r=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:s,shouldProcess:t,impl:{readUrls:i,inline:a}};function t(l){return l.search(r)!==-1}function i(l){for(var o=[],u;(u=r.exec(l))!==null;)o.push(u[1]);return o.filter(function(y){return!n.isDataUrl(y)})}function a(l,o,u,y){return Promise.resolve(o).then(function(d){return u?n.resolveUrl(d,u):d}).then(y||n.getAndEncode).then(function(d){return n.dataAsUrl(d,n.mimeType(o))}).then(function(d){return l.replace(A(o),"$1"+d+"$3")});function A(d){return new RegExp(`(url\\(['"]?)(`+n.escape(d)+`)(['"]?\\))`,"g")}}function s(l,o,u){if(y())return Promise.resolve(l);return Promise.resolve(l).then(i).then(function(A){var d=Promise.resolve(l);return A.forEach(function(R){d=d.then(function(w){return a(w,R,o,u)})}),d});function y(){return!t(l)}}}function oe(){return{resolveAll:r,impl:{readAll:t}};function r(){return t(document).then(function(i){return Promise.all(i.map(function(a){return a.resolve()}))}).then(function(i){return i.join(`
    `)})}function t(){return Promise.resolve(n.asArray(document.styleSheets)).then(a).then(i).then(function(l){return l.map(s)});function i(l){return l.filter(function(o){return o.type===CSSRule.FONT_FACE_RULE}).filter(function(o){return g.shouldProcess(o.style.getPropertyValue("src"))})}function a(l){var o=[];return l.forEach(function(u){try{n.asArray(u.cssRules||[]).forEach(o.push.bind(o))}catch(y){console.log("Error while reading CSS rules from "+u.href,y.toString())}}),o}function s(l){return{resolve:function(){var u=(l.parentStyleSheet||{}).href;return g.inlineAll(l.cssText,u)},src:function(){return l.style.getPropertyValue("src")}}}}}function ae(){return{inlineAll:t,impl:{newImage:r}};function r(i){return{inline:a};function a(s){return n.isDataUrl(i.src)?Promise.resolve():Promise.resolve(i.src).then(s||n.getAndEncode).then(function(l){return n.dataAsUrl(l,n.mimeType(i.src))}).then(function(l){return new Promise(function(o,u){i.onload=o,i.onerror=u,i.src=l})})}}function t(i){if(!(i instanceof Element))return Promise.resolve(i);return a(i).then(function(){return i instanceof HTMLImageElement?r(i).inline():Promise.all(n.asArray(i.childNodes).map(function(s){return t(s)}))});function a(s){var l=s.style.getPropertyValue("background");return l?g.inlineAll(l).then(function(o){s.style.setProperty("background",o,s.style.getPropertyPriority("background"))}).then(function(){return s}):Promise.resolve(s)}}}})(J)});var I={};me(I,{default:()=>be,impl:()=>we,toBlob:()=>ve,toJpeg:()=>pe,toPixelData:()=>ye,toPng:()=>ge,toSvg:()=>de});var q=$(_());D(I,$(_()));var{toSvg:de,toPng:ge,toJpeg:pe,toBlob:ve,toPixelData:ye,impl:we}=q,{default:W,...Pe}=q,be=W!==void 0?W:Pe;export{be as default,we as impl,ve as toBlob,pe as toJpeg,ye as toPixelData,ge as toPng,de as toSvg};
    //# sourceMappingURL=dom-to-image.mjs.map