# Electron 窗口管理工具

## 功能概述

本模块提供了一系列用于管理Electron应用程序窗口的实用工具函数。这些工具遵循函数式编程风格，注重解耦和可复用性，使窗口管理变得简单高效。

## 主要功能

- **窗口创建**：通过简单配置创建浏览器窗口
- **窗口持久化**：支持窗口关闭后自动重建功能，带用户确认机制
- **心跳检测**：监控窗口运行状态，保证窗口正常工作
- **单实例模式**：确保特定URL的窗口只有一个实例
- **窗口配置管理**：提供窗口配置的合并和验证功能

## 文件结构

- `useBrowserWindow.js` - 主要入口文件，提供窗口创建的高级API
- `browserWindowCore.js` - 核心功能，提供底层窗口创建和配置管理
- `browserWindowManagement.js` - 窗口管理功能，如关闭、处理单实例等
- `windowPersistence.js` - 窗口持久化功能，支持窗口自动重建和用户确认机制
- `windowHeartbeat.js` - 窗口心跳检测，监控窗口状态

## 使用示例

```javascript
import { 创建浏览器窗口 } from './useBrowserWindow.js';

// 创建一个基本的窗口
const 基本窗口 = 创建浏览器窗口('app://example.html');

// 创建一个具有特定配置的窗口
const 配置窗口 = 创建浏览器窗口('app://config-example.html', {
  宽度: 800,
  高度: 600,
  单实例: true,
  保持活跃: true,
  使用心跳检测: true
});
```

## 窗口配置选项

创建窗口时可以指定以下配置选项：

- `关闭已有窗口` (boolean): 是否关闭已存在的相同URL窗口，默认为true
- `单实例` (boolean): 是否确保只有一个窗口实例，默认为true
- `立即显示` (boolean): 是否立即显示窗口，默认为true
- `清除缓存` (boolean): 是否清除浏览器缓存，默认为true
- `保持活跃` (boolean): 窗口关闭时是否自动重新创建，默认为true
- `使用心跳检测` (boolean): 是否启用心跳检测，默认为true
- `显示标题栏` (boolean): 是否显示窗口标题栏，默认为true

## 安全性和性能考虑

- 已实现防止窗口无限循环创建的机制
  - 窗口重建计数跟踪
  - 用户确认对话框机制
  - 最大重建次数限制
- 支持窗口状态监控，确保应用稳定运行
- 优化了窗口创建和管理流程，提高性能 