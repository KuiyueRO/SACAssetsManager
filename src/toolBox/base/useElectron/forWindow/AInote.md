# Electron 窗口模块设计说明

## 模块结构

此模块采用了函数式编程风格，将 Electron 窗口管理功能拆分为多个专门的子模块：

1. **useBrowserWindow.js** - 主模块，提供创建浏览器窗口的入口函数
2. **browserWindowCore.js** - 核心功能，提供配置管理和参数验证
3. **browserWindowManagement.js** - 窗口管理功能，负责创建、关闭和单实例处理
4. **windowPersistence.js** - 窗口持久化功能，确保窗口保持活跃
5. **windowHeartbeat.js** - 心跳检测功能，监控窗口状态并自动恢复

## 设计原则

1. **职责分离**: 每个文件处理一类相关功能
2. **函数式风格**: 使用纯函数减少副作用
3. **易扩展**: 通过合理的模块划分，方便未来功能扩展
4. **可测试**: 独立的功能函数更易于单元测试

## 使用说明

主要通过 `创建浏览器窗口` 函数创建和管理 Electron 窗口，通过配置对象控制窗口的行为。

```javascript
创建浏览器窗口('https://example.com', {
  单实例: true,
  保持活跃: true,
  使用心跳检测: true
});
```

## readme.md

```markdown:src/toolBox/base/useElectron/forWindow/readme.md
# Electron 窗口管理工具

## 功能简介

这个工具提供了创建和管理 Electron 浏览器窗口的功能，支持：

- 窗口单实例控制
- 窗口持久化（自动重建）
- 窗口心跳检测
- 窗口缓存清理

## 使用示例

```javascript
import { 创建浏览器窗口 } from './useBrowserWindow.js';

// 基本用法
创建浏览器窗口('https://example.com');

// 高级配置
创建浏览器窗口('https://example.com', {
  单实例: true,         // 确保只有一个窗口实例
  保持活跃: true,       // 窗口关闭后自动重建
  使用心跳检测: true,   // 使用心跳检测确保窗口响应
  清除缓存: true,       // 清除浏览器缓存
  显示标题栏: false,    // 隐藏窗口标题栏
  立即显示: true        // 窗口创建后立即显示
});
```

## 配置选项

| 选项 | 默认值 | 说明 |
|------|--------|------|
| 关闭已有窗口 | true | 是否关闭已存在的相同URL窗口 |
| 单实例 | true | 是否确保只有一个窗口实例 |
| 立即显示 | true | 是否立即显示窗口 |
| 清除缓存 | true | 是否清除浏览器缓存 |
| 保持活跃 | true | 窗口关闭时是否自动重新创建 |
| 使用心跳检测 | true | 是否启用心跳检测 |
| 显示标题栏 | true | 是否显示窗口标题栏 |
| 获取同源窗口函数 | null | 用于查找同源窗口的函数 |
| enableRemote | null | 自定义的enableRemote函数 |
```

## 总结

通过这种拆分方式，原本过长的单一文件被拆分成了5个功能明确的小模块：
1. 主模块 - 提供API入口
2. 核心功能 - 提供基础配置
3. 窗口管理 - 处理窗口实例
4. 窗口持久化 - 保持窗口活跃
5. 心跳检测 - 监控窗口状态

每个模块都有明确的职责和适当的功能分组，使代码更易于理解和维护。同时保持了函数式编程风格，减少了函数嵌套。 