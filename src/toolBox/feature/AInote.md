# 特定功能工具重构笔记

## 重构状态

这个目录包含针对特定功能领域的工具函数和模块，目前重构进行中。

## 职责范围

- 提供特定技术栈和框架的集成工具
- 实现专业领域的功能工具
- 封装复杂功能为简单易用的接口

## 重构原则

1. **依赖隔离**：
   - **(此项已废弃，请遵循全局 `useDeps` 原则)**
   - 通过适配器模式隔离依赖
   - 避免依赖扩散到其他模块

2. **接口统一 (命名部分已修订)**：
   - 保持一致的API设计风格
   - 使用统一的错误处理机制
   - **命名规范:** 遵循项目根目录定义的 [**编码风格指南**](../../../CODING_STYLE.md#命名规范-naming-conventions)。
   - **注释:** 良好的命名**不能取代必要的注释**。

3. **功能分组**：
   - 按技术栈和功能领域分组
   - 相关功能集中在同一模块
   - 避免功能重复和分散

## 重构进度

- ⏳ useVue - Vue框架相关工具（进行中）
- ⏳ forFileSystem - 文件系统操作工具（进行中）
- ⏳ useImage - 图像处理工具（进行中）
- ⏳ forColors - 颜色处理工具（进行中）
- ⏳ useSvg - SVG图形处理工具（进行中）
- ⏳ useOpenAI - OpenAI接口工具（进行中）
- ⏳ useKonva - Konva绘图工具（进行中）
- ⏳ useStateMachine - 状态机工具（进行中）
- ⏳ useSyncedstore - 同步存储工具（进行中）
- ⏳ useChat - 聊天功能工具（进行中）
- ⏳ forAssets - 资源管理工具（进行中）

## 待处理事项

1. ~~需要统一各子目录的命名规范，使用适当的前缀（use或for）~~ (**已废弃**) 文件夹和文件命名应遵循全局命名规范，追求清晰反映职责。
2. 需要将单独的imageToolBox.js合并到useImage目录中
3. 需要完善各模块的JSDoc文档和使用示例
4. 需要提供统一的错误处理机制

## 注意事项

- 特定功能工具应该尽量减少对基础工具以外的依赖
- 每个子目录都应该有自己的README.md和AInote.md
- 使用适配器模式封装外部依赖，提供统一接口
- 考虑不同平台和环境的兼容性
- 对于需要使用类的情况，应该明确说明理由

## 外部依赖管理原则 (`useDeps`)

**核心原则:** 本 `feature` 目录下的所有模块 **禁止** 直接引入外部依赖（来自 `node_modules` 或 `static`）。所有外部依赖的引入和封装 **必须** 通过 [`../base/useDeps`](../base/useDeps) 目录进行。

**目标:**
*   确保依赖管理的统一性。
*   保持 `feature` 模块的独立性和可测试性。
*   遵循项目整体架构规范。

**实现方式:**
*   需要使用外部库的功能时，应从 `../base/useDeps` 导入其提供的接口。

**详情参见:**
*   [`base` 目录 AInote.md 中关于依赖管理的说明](../base/AInote.md#外部依赖管理原则-usedeps)

## 外部依赖管理建议

~~对于特定功能工具中使用的外部依赖，建议：~~

~~1. 评估是否可以将node_modules中的依赖打包为静态ESM模块~~
~~2. 对于常用库，考虑创建统一的适配器和包装器~~
~~3. 明确声明每个模块的依赖要求和版本兼容性~~
~~4. 在useDeps中集中管理所有外部依赖引用~~ **(此段已废弃，请遵循全局 `useDeps` 原则)** 