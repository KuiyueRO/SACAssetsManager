# Eagle API 实现说明

## 版本要求
- Eagle 1.11 Build21 (2020/06/17) 或更高版本
- 默认监听端口：41595
- 基础 URL：http://localhost:41595

## API 模块说明

### 应用信息模块 (useEagleApplication.js)
- 获取应用详细信息
- 检查版本兼容性
- 检查应用运行状态

### 请求处理模块 (useEagleRequest.js)
- 统一的请求处理
- 支持浏览器和 Node.js 环境
- 自动处理 CORS 问题
- 错误处理和状态检查

### 文件夹管理模块
- useEagleFolderCreate.js：创建文件夹
- useEagleFolderUpdate.js：更新文件夹信息
- useEagleFolderList.js：获取文件夹列表

## 实现特点

### 1. 版本兼容性检查
- 自动检查 Eagle 版本
- 确保 API 功能可用
- 提供清晰的错误提示

### 2. 错误处理
- 统一的错误处理机制
- 详细的错误信息
- 应用状态检查

### 3. 跨平台支持
- 支持浏览器环境
- 支持 Node.js 环境
- 自动处理 CORS 问题

### 4. 参数验证
- 严格的参数验证
- 自动清理输入数据
- 防止无效请求

## 使用注意事项

1. 版本要求
   - 确保 Eagle 版本满足要求
   - 检查应用运行状态

2. 错误处理
   - 所有 API 调用都需要错误处理
   - 注意检查应用运行状态

3. 参数验证
   - 提供有效的参数
   - 注意参数格式要求

4. 性能考虑
   - 批量操作使用批量 API
   - 避免频繁请求

## 待优化项目

1. 缓存机制
   - 实现请求结果缓存
   - 优化重复请求

2. 重试机制
   - 添加请求重试
   - 处理临时错误

3. 批量操作
   - 优化批量 API
   - 添加进度回调

4. 事件系统
   - 实现事件监听
   - 支持状态变更通知

# Eagle 文件夹管理模块设计说明

## 模块结构

该模块被拆分为以下几个文件：

1. `useEagleFolderCreate.js` - 处理文件夹创建相关功能
2. `useEagleFolderUpdate.js` - 处理文件夹更新和重命名功能
3. `useEagleFolderList.js` - 处理文件夹列表获取功能
4. `useEagleFolder.js` - 统一导出所有功能的索引文件

## 设计原则

1. **关注点分离**
   - 每个文件负责特定的功能领域
   - 避免功能重复和代码耦合

2. **函数式编程**
   - 使用纯函数设计
   - 避免副作用
   - 函数命名遵循规范

3. **错误处理**
   - 统一的参数验证
   - 清晰的错误提示
   - 类型安全的返回值

4. **性能优化**
   - 减少重复代码
   - 优化请求参数处理
   - 使用 URL 编码处理特殊字符

## 主要改进

1. **代码组织**
   - 将大文件拆分为多个小文件
   - 每个文件职责单一
   - 便于维护和测试

2. **功能优化**
   - 合并重复的创建文件夹功能
   - 优化参数验证逻辑
   - 统一错误处理

3. **类型定义**
   - 完善 JSDoc 注释
   - 添加错误类型定义
   - 明确参数类型

4. **安全性**
   - 添加参数验证
   - 使用 URL 编码处理特殊字符
   - 避免敏感信息泄露

## 使用示例

```javascript
import { 创建文件夹, 重命名文件夹, 获取文件夹列表 } from './useEagleFolder.js';

// 创建文件夹
const 结果 = await 创建文件夹({
    folderName: '新文件夹',
    token: 'your-token'
});

// 重命名文件夹
await 重命名文件夹({
    folderId: 'folder-id',
    newName: '新名称',
    token: 'your-token'
});

// 获取文件夹列表
const 列表 = await 获取文件夹列表({
    token: 'your-token'
});
```

## 注意事项

1. 所有函数都是异步的，需要使用 await 调用
2. token 参数是可选的，但建议提供以提高安全性
3. 错误处理应该使用 try-catch 包装
4. 建议在生产环境中添加请求超时处理 