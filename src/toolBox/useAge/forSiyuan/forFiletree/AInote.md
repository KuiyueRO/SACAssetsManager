# 思源笔记文件树操作工具开发笔记

## 开发状态

该目录包含思源笔记文件树和文档操作相关的工具函数和模块，目前已完成基础功能实现。

## 实现思路

1. 基于思源笔记的API接口进行封装，提供统一的文件树和文档操作功能
2. 采用函数式风格设计，保持与toolBox其他模块风格一致
3. 中英文双命名API，方便不同使用场景
4. 参数标准化和严格验证，提高API使用的稳定性

## 已实现功能

- 文档树查询（列出文档树、搜索文档、获取文档内容）
- 文档创建（创建文档、创建每日笔记、使用Markdown创建文档）
- 文档操作（重命名、移动、删除、排序）
- 文档转换（文档与标题互转、列表项转文档）

## 待优化项

1. 优化错误处理机制，提供更详细的错误信息
2. 增加批量操作功能，提高操作效率
3. 增加缓存机制，减少API调用次数
4. 优化文档结构转换功能

## 依赖关系

- 依赖 `../useSiyuan.js` 用于环境检查
- 依赖 `../../base/forNetWork/forSiyuanApi/apiBase.js` 用于API请求

## 与其他模块的关系

- 与 `useSiyuanFile.js` 相互配合：文件树操作专注于文档结构和内容，文件操作专注于文件系统层面
- 与 `useSiyuanBlock.js` 相互配合：文件树操作处理文档级别，块操作处理块级别
- 与 `useSiyuanNotebook.js` 相互配合：文件树操作基于笔记本进行，笔记本操作提供笔记本管理

## 重构记录

从 `source/fromThirdParty/siyuanKernel/filetree.js` 重构而来：

1. 将所有函数迁移到 `src/toolBox/useAge/forSiyuan/useSiyuanFiletree.js`
2. 添加中文函数名，使用与原函数相对应的中文命名
3. 优化参数验证和错误处理
4. 添加完整的JSDoc注释
5. 创建兼容层，保持原有代码的使用方式

## 后续计划

1. 将部分功能拆分到专门的文件中，如文档查询、文档转换等
2. 增加更多实用功能，如批量处理、文档比较等
3. 增加文档操作的事件机制，便于其他模块响应文档变化
4. 可能考虑增加文档缓存机制，提高频繁操作时的性能 